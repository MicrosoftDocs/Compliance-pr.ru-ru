---
title: Шифрование для Skype, OneDrive, SharePoint и Exchange
description: Сводка. Описание шифрования для Skype, OneDrive, SharePoint, Microsoft Teams и Exchange Online.
ms.author: krowley
author: kccross
manager: laurawi
ms.reviewer: sosstah
f1.keywords:
- NOCSH
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_Enterprise
- M365-security-compliance
- Strat_O365_Enterprise
- SPO_Content
- MS-Compliance
titleSuffix: Microsoft Service Assurance
ms.openlocfilehash: 9317b112d1fa759b1f90e072203e7b8093a432fd
ms.sourcegitcommit: 21ed42335efd37774ff5d17d9586d5546147241a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2021
ms.locfileid: "50120548"
---
# <a name="encryption-for-skype-for-business-onedrive-for-business-sharepoint-online-microsoft-teams-and-exchange-online"></a>Шифрование для Skype для бизнеса, OneDrive для бизнеса, SharePoint Online, Microsoft Teams и Exchange Online

Microsoft 365 — это среда с высокой безопасностью, которая обеспечивает обширную защиту на нескольких уровнях: физическую безопасность центра обработки данных, сетевую безопасность, безопасность доступа, безопасность приложений и безопасность данных.

## <a name="skype-for-business"></a>Skype для бизнеса

Данные клиента Skype для бизнеса могут храниться в неав то же время в виде файлов или презентаций, которые выложены участниками собрания. Сервер веб-конференций шифрует данные клиента с помощью AES с помощью 256-битного ключа. Зашифрованные данные клиента хранятся в файловом хранилище. Каждый фрагмент данных клиента шифруется с помощью разных 256-битных ключей, созданных случайным образом. При совместном доступе к данным клиента в конференции сервер веб-конференций дает клиентам указание скачать зашифрованные данные клиента по протоколу HTTPS. Он отправляет соответствующий ключ клиентам, чтобы данные клиента можно было расшифровать. Сервер веб-конференций также проходит проверку подлинности клиентов конференций, прежде чем он разрешит клиентам доступ к данным клиента конференции. При присоединении к веб-конференции каждый клиент конференц-связи сначала устанавливает диалоговое окно SIP с компонентом фокуса конференц-связи, запущенным на сервере переднего сервера по TLS. Фокус конференции передает клиенту конференции файл cookie проверки подлинности, созданный сервером веб-конференций. Затем клиент conferencing подключается к серверу веб-conferencing, который представляет файл cookie проверки подлинности для проверки подлинности на сервере.

## <a name="sharepoint-online-and-onedrive-for-business"></a>SharePoint Online и OneDrive для бизнеса

Все файлы клиентов в SharePoint Online защищены уникальными ключами для каждого файла, которые всегда являются монопольными для одного клиента. Ключи создаются и управляются службой SharePoint Online, а также когда ключ клиента используется, создается и управляется клиентами. При отправке файла SharePoint Online выполняет шифрование в контексте запроса на отправку перед отправкой в хранилище Azure. При загрузке файла SharePoint Online получает зашифрованные данные клиента из хранилища Azure на основе уникального идентификатора документа и расшифровивает данные клиента перед их отправкой пользователю. Хранилище Azure не может расшифровывать или даже идентифицировать или понимать данные клиента. Все шифрование и расшифровка происходят в тех же системах, которые принудительно используют изоляцию клиента, такие как Azure Active Directory и SharePoint Online.

Некоторые рабочие нагрузки в Microsoft 365 хранят данные в SharePoint Online, включая Microsoft Teams, в которой хранятся все файлы в SharePoint Online, и OneDrive для бизнеса, который использует SharePoint Online для хранения. Все данные клиента, хранимые в SharePoint Online, шифруются (с помощью одного или более 256-битных ключей AES) и распространяются по центру обработки данных следующим образом. (Каждый этап этого процесса шифрования — проверка FIPS 140-2 уровня 2. Дополнительные сведения о соответствии требованиям FIPS 140-2 см. в этой [теме.)](/previous-versions/sql/sql-server-2008-r2/bb326611(v=sql.105))

- Каждый файл делится на один или несколько блоков в зависимости от размера файла. Каждый блок шифруется с помощью собственного уникального 256-битного ключа AES.
- При обновлении файла обновление обрабатывается таким же образом: изменение делится на один или несколько блоков, а каждый блок шифруется с помощью отдельного уникального ключа.
- Эти блоки ( файлы, фрагменты файлов и дельты обновлений) хранятся в хранилище Azure как большие объемы, случайным образом распределенные по нескольким учетным записям хранения Azure.
- Набор ключей шифрования для этих блоков данных клиента сам по себе шифруется.

    - Ключи, используемые для шифрования BLOB-файлов, хранятся в базе данных контента SharePoint Online.
    - База данных контента защищена средствами управления доступом к базе данных и шифрованием в неав то же время. Шифрование выполняется с помощью [прозрачного шифрования](/sql/relational-databases/security/encryption/transparent-data-encryption-tde) данных (TDE) в [базе данных Azure SQL.](/azure/sql-database/sql-database-technical-overview) (База данных SQL Azure — это реляционная служба баз данных общего назначения в Microsoft Azure, которая поддерживает такие структуры, как реляционные данные, JSON, пространственные и XML.) Эти секреты находятся на уровне службы Для SharePoint Online, а не на уровне клиента. Эти секреты (иногда называемые главными ключами) хранятся в отдельном защищенном репозитории, называемом хранилищем ключей. TDE обеспечивает безопасность неав то же время для активной базы данных и резервных копий базы данных и журналов транзакций.
    - Когда клиенты предоставляют необязательный ключ, ключ клиента хранится в хранилище Azure Key Vault, а служба использует его для шифрования ключа клиента, который используется для шифрования ключа сайта, который затем используется для шифрования ключей уровня файлов. По сути, новая иерархия ключей создается, когда клиент предоставляет ключ.
- Карта, используемая для повторной сборки файла, хранится в базе данных контента вместе с зашифрованными ключами отдельно от основной клавиши, необходимой для их расшифровки.
- Каждая учетная запись хранения Azure имеет собственные уникальные учетные данные для каждого типа доступа (чтение, запись, нумерации и удаление). Каждый набор учетных данных содержится в безопасном хранилище ключей и регулярно обновляется. Как описано выше, существует три различных типа хранилищ, каждый из которых имеет отдельную функцию:
    - Данные клиента хранятся в виде зашифрованных BLOB-файлов в хранилище Azure. Ключ каждого фрагмента данных клиента шифруется и хранится отдельно в базе данных контента. Сами данные клиента не имеют никакой информации о том, как их можно расшифровать.
    - База данных контента  это база данных SQL Server. В нем хранится карта, необходимая для поиска и повторной обработки больших объемов данных клиента, хранимого в хранилище Azure, а также ключей, необходимых для их шифрования. Однако сам набор ключей шифруется (как объяснялось выше) и хранится в отдельном хранилище ключей.
    - Хранилище ключей физически отделено от базы данных контента и хранилища Azure. Он содержит учетные данные для каждого контейнера хранилища Azure и главный ключ для набора зашифрованных ключей, хранимого в базе данных контента.

Каждый из этих трех компонентов хранения — хранилище BLOB-приложений Azure, база данных контента и хранилище ключей — физически отделены друг от друга. Информация, хранящаяся в каждом из компонентов, не может использоваться самостоятельно. Без доступа ко всем трем фрагментам невозможно получить ключи, расшифровать ключи, чтобы сделать их доступными для использования, связать ключи с соответствующими блоками, расшифровать каждый блок или воссоздать документ из его составляющих блоков.

Сертификаты BitLocker, которые защищают тома физических дисков на компьютерах в центр обработки данных, хранятся в защищенном репозитории (хранилище секретов SharePoint Online), защищенном ключом фермы.

Ключи TDE, которые защищают ключи для каждого BLOB-объектов, хранятся в двух расположениях:

- Безопасный репозиторий, в котором находятся сертификаты BitLocker и защищен с помощью ключа фермы; и
- В безопасном репозитории, управляемом azure SQL Database.

Учетные данные, используемые для доступа к контейнерам хранилища Azure, также хранятся в хранилище секретов SharePoint Online и делегируют их каждой ферме SharePoint Online при необходимости. Эти учетные данные являются подписями SAS хранилища Azure с отдельными учетными данными, используемыми для чтения или записи данных, а также с примененной политикой, чтобы срок их действия автоматически истекал каждые 60 дней. Для чтения и записи данных используются разные учетные данные (не оба), а фермам SharePoint Online не даются разрешения на нумерации.

> [!NOTE]
> Для клиентов Office 365 для государственных органов США больших объемы данных хранятся в хранилище Azure для государственных служб США. Кроме того, доступ к ключам SharePoint Online в Office 365 для государственных органов США ограничен сотрудниками Office 365, которые были специально экранированы. У сотрудников по работе с Azure для государственных органов нет доступа к хранилище ключей SharePoint Online, которое используется для шифрования больших объемов данных.

Дополнительные сведения о шифровании данных в SharePoint Online и OneDrive для бизнеса см. в сведениях о шифровании данных в OneDrive для бизнеса [и SharePoint Online.](https://technet.microsoft.com/library/dn905447.aspx)

### <a name="list-items-in-sharepoint-online"></a>Элементы списка в SharePoint Online

Элементы списка — это меньшие блоки пользовательских данных, которые создаются специально или могут более динамически в пределах сайта, например строки в созданном пользователем списке, отдельные записи в блоге SharePoint Online или записи на вики-странице SharePoint Online. Элементы списка хранятся в базе данных контента (Azure SQL Database) и защищаются с помощью TDE.

## <a name="encryption-of-data-in-transit"></a>Шифрование транзитных данных

В OneDrive для бизнеса и SharePoint Online используются два сценария для входящих и исходящих данных в центрах данных.

- **Взаимодействие клиента с сервером** . Для связи с SharePoint Online и OneDrive для бизнеса через Интернет используются подключения TLS.
- **Перемещение данных между центрами обработки** данных — основная причина перемещения данных между центрами данных — это гео репликация для обеспечения аварийного восстановления. Например, SQL Server журналы транзакций и дельты хранилища BLOB-хранилищ по этой конвейеру. Хотя эти данные передаются по частной сети, они дополнительно защищены лучшим в своем классе шифрованием.

## <a name="exchange-online"></a>Exchange Online

Exchange Online использует BitLocker для всех данных почтового ящика, а конфигурация BitLocker описана в [BitLocker для шифрования.](/microsoft-365/compliance/office-365-bitlocker-and-distributed-key-manager-for-encryption) Шифрование на уровне службы шифрует все данные почтовых ящиков на уровне почтового ящика. 

Помимо шифрования служб, Microsoft 365 поддерживает ключ клиента, построенный на основе шифрования служб. Ключ клиента — это управляемый Корпорацией Майкрософт ключ для шифрования службы Exchange Online, который также находится в плане корпорации Майкрософт. Этот метод шифрования обеспечивает повышенную защиту, не предусмотренную BitLocker, так как он обеспечивает разделение администраторов сервера и криптографические ключи, необходимые для расшифровки данных, а также поскольку шифрование применяется непосредственно к данным (в отличие от BitLocker, применяя шифрование на логическом диске тома), все данные клиента, скопированные с сервера Exchange, остаются зашифрованными.

Область шифрования службы Exchange Online — это данные клиента, хранимые в exchange Online. (Skype для бизнеса хранит почти весь созданный пользователем контент в почтовом ящике Exchange Online пользователя и поэтому наследует функцию шифрования службы Exchange Online.)


## <a name="microsoft-teams"></a>Microsoft Teams

Teams использует TLS и MTLS для шифрования мгновенных сообщений. Для всего трафика "сервер-сервер" требуется MTLS независимо от того, ограничивается ли трафик внутренней сетью или пересекает внутренний периметр сети.

В этой таблице приводится сет несколько протоколов, используемых в Teams.

|**Тип трафика**|**Зашифровано с помощью**|
|:-----|:-----|
|"сервер-сервер"|MTLS|
|"Клиент-сервер" (например, обмен мгновенными сообщениями и присутствие)|TLS;|
|Потоки мультимедиа (например, общий доступ к аудио- и видеофайлам мультимедиа)|TLS;|
|Общий доступ к аудио- и видеофайлам мультимедиа|SRTP/TLS|
|Передача сигналов|TLS;|

#### <a name="media-encryption"></a>Шифрование мультимедиа

Трафик мультимедиа шифруется с помощью протокола SRTP — профиля Real-Time Transport Protocol (RTP), который обеспечивает конфиденциальность, проверку подлинности и защиту от атак с повтором для трафика RTP. SRTP использует ключ сеанса, созданный с помощью безопасного генератора случайных чисел, и обменивается данными с помощью сигнального канала TLS. Трафик мультимедиа "клиент-клиент" согласовываться с помощью сигналов подключения "клиент-сервер", но шифруется с помощью SRTP при прямом перенажении между клиентами.

Teams использует маркер на основе учетных данных для безопасного доступа к ретрансляторам мультимедиа через TURN. Ретрансляторы мультимедиа обмениваются маркером через канал, защищенный TLS.

#### <a name="fips"></a>FIPS

Teams использует алгоритмы, совместимые с FIPS (Федеральный стандарт обработки информации), для обмена ключами шифрования. Дополнительные сведения о реализации FIPS см. в публикации [140-2](/microsoft-365/compliance/offering-fips-140-2)Федерального стандарта обработки информации (FIPS).
