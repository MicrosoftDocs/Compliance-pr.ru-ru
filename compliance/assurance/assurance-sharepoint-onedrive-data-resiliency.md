---
title: Устойчивость данных SharePoint и OneDrive в Microsoft 365
description: В этой статье представлен обзор устойчивости данных SharePoint и OneDrive в Microsoft 365.
ms.author: robmazz
author: robmazz
manager: laurawi
ms.reviewer: sosstah
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
f1.keywords:
- NOCSH
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- MS-Compliance
titleSuffix: Microsoft Service Assurance
ms.openlocfilehash: c940b778681805a1e50a9e565117cd67deb52566
ms.sourcegitcommit: 2973d25e9e0185b84d281f963553a332eac1c1a3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/28/2021
ms.locfileid: "50040389"
---
# <a name="sharepoint-and-onedrive-data-resiliency-in-microsoft-365"></a><span data-ttu-id="9da19-103">Устойчивость данных SharePoint и OneDrive в Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="9da19-103">SharePoint and OneDrive data resiliency in Microsoft 365</span></span>

<span data-ttu-id="9da19-104">В Microsoft 365 OneDrive построен на основе файловой платформы SharePoint.</span><span class="sxs-lookup"><span data-stu-id="9da19-104">Within Microsoft 365, OneDrive is built on top of the SharePoint file platform.</span></span> <span data-ttu-id="9da19-105">В этой статье для ссылок на оба продукта будет использоваться только SharePoint.</span><span class="sxs-lookup"><span data-stu-id="9da19-105">In this article, only SharePoint will be used to refer to both products.</span></span> <span data-ttu-id="9da19-106">Содержание этой статьи относится к Microsoft 365 и не относится к потребительским службам.</span><span class="sxs-lookup"><span data-stu-id="9da19-106">The contents of this article are relevant to Microsoft 365 and do not apply to consumer services.</span></span>

<span data-ttu-id="9da19-107">Существует два основных актива, которые составляют основное хранилище контента SharePoint:</span><span class="sxs-lookup"><span data-stu-id="9da19-107">There are two primary assets that make up the core content storage of SharePoint:</span></span>

- <span data-ttu-id="9da19-108">**Метаданные:** метаданные о каждом файле хранятся в azure SQL Database.</span><span class="sxs-lookup"><span data-stu-id="9da19-108">**Metadata**: Metadata about each file is stored in Azure SQL Database.</span></span> <span data-ttu-id="9da19-109">Azure SQL предоставляет полную историю непрерывности бизнеса, которую Использует SharePoint, и подробные сведения будут подробно освещаются далее в этой статье.</span><span class="sxs-lookup"><span data-stu-id="9da19-109">Azure SQL offers a complete business continuity story that SharePoint uses and details are covered later in this article.</span></span>
- <span data-ttu-id="9da19-110">**Хранилище BLOB-приложений:** пользовательское содержимое, загруженное в SharePoint, хранится в хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="9da19-110">**Blob storage**: User content that is uploaded into SharePoint is stored in Azure Storage.</span></span> <span data-ttu-id="9da19-111">SharePoint создал пользовательский план устойчивости на основе хранилища Azure, чтобы обеспечить дублирование пользовательского контента и действительно активной системы почти в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="9da19-111">SharePoint has built a custom resiliency plan on top of Azure Storage to ensure near real-time duplication of user content and a truly active/active system.</span></span>

<span data-ttu-id="9da19-112">Полный набор элементов управления, обеспечивающих устойчивость данных, объясняется в последующих разделах.</span><span class="sxs-lookup"><span data-stu-id="9da19-112">The complete set of controls to ensure data resiliency is explained in further sections.</span></span>

## <a name="blob-storage-resilience"></a><span data-ttu-id="9da19-113">Устойчивость хранилища BLOB-хранилищ</span><span class="sxs-lookup"><span data-stu-id="9da19-113">Blob storage resilience</span></span>

<span data-ttu-id="9da19-114">В SharePoint есть пользовательское решение для хранения данных клиентов в хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="9da19-114">SharePoint has a custom-built solution for storage of customer data in Azure Storage.</span></span> <span data-ttu-id="9da19-115">Каждый файл одновременно записан в основной и дополнительный регион центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="9da19-115">Every file is simultaneously written into both a primary and a secondary datacenter region.</span></span> <span data-ttu-id="9da19-116">Если в любой из областей Azure не удается сделать запись, сохранение файла не удастся.</span><span class="sxs-lookup"><span data-stu-id="9da19-116">If writes to either Azure region fail, the file save will fail.</span></span> <span data-ttu-id="9da19-117">После записи содержимого в хранилище Azure контрольные контрольные точки хранятся отдельно с метаданными и используются для того, чтобы гарантировать, что зафиксированная запись идентична исходному файлу, отправленном в SharePoint во время всех последующих считывок.</span><span class="sxs-lookup"><span data-stu-id="9da19-117">After the contents are written into Azure Storage, checksums are stored separately with metadata, and are used to ensure that the committed write is identical to the original file sent to SharePoint during all future reads.</span></span> <span data-ttu-id="9da19-118">Этот же метод используется во всех рабочего процессах для предотвращения распространения любого повреждения, которое должно произойти.</span><span class="sxs-lookup"><span data-stu-id="9da19-118">This same technique is used in all workflows to prevent propagation of any corruption that should occur.</span></span> <span data-ttu-id="9da19-119">В каждом регионе azure Locally Redundant Storage (LRS) обеспечивает высокий уровень надежности.</span><span class="sxs-lookup"><span data-stu-id="9da19-119">Within each region, Azure Locally Redundant Storage (LRS) provides a high level of reliability.</span></span> <span data-ttu-id="9da19-120">Подробные [сведения см. в статье](https://docs.microsoft.com/azure/storage/common/storage-redundancy-lrs) о резервированиях хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="9da19-120">See the [Azure Storage redundancy](https://docs.microsoft.com/azure/storage/common/storage-redundancy-lrs) article for details.</span></span>

<span data-ttu-id="9da19-121">SharePoint использует Append-Only хранилища.</span><span class="sxs-lookup"><span data-stu-id="9da19-121">SharePoint uses Append-Only storage.</span></span> <span data-ttu-id="9da19-122">Этот процесс гарантирует, что файлы не могут быть изменены или повреждены после первоначального сохранения, но также с помощью версии продукта можно получить любую предыдущую версию содержимого файла.</span><span class="sxs-lookup"><span data-stu-id="9da19-122">This process ensures that files cannot be changed or corrupted after an initial save, but also by using in-product versioning, any previous version of the file contents can be retrieved.</span></span>

<span data-ttu-id="9da19-123">Среды SharePoint в любом из центра обработки данных могут получать доступ к контейнерам хранилища в обоих регионах Azure.</span><span class="sxs-lookup"><span data-stu-id="9da19-123">SharePoint environments in either datacenter can access storage containers in both Azure regions.</span></span> <span data-ttu-id="9da19-124">Из соображений производительности контейнер хранилища в том же локальном центре обработки данных всегда предпочтительный, однако запросы на чтение, которые не видят результатов в пределах нужного порога, будут иметь то же содержимое, которое запрашивается из удаленного центра обработки данных, чтобы гарантировать, что данные всегда доступны.</span><span class="sxs-lookup"><span data-stu-id="9da19-124">For performance reasons the storage container in the same local datacenter is always preferred, however, read requests that do not see results within a desired threshold will have the same content requested from the remote datacenter to ensure data is always available.</span></span>

## <a name="metadata-resilience"></a><span data-ttu-id="9da19-125">Устойчивость метаданных</span><span class="sxs-lookup"><span data-stu-id="9da19-125">Metadata resilience</span></span>

<span data-ttu-id="9da19-126">Метаданные SharePoint также критически важны для доступа к пользовательскому содержимому, так как в них хранятся ключи доступа к содержимому, храняому в хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="9da19-126">SharePoint metadata is also critical to accessing user content as it stores the location of and access keys to the content stored in Azure Storage.</span></span> <span data-ttu-id="9da19-127">Эти базы данных хранятся в Azure SQL с обширным планом [непрерывности бизнеса.](https://docs.microsoft.com/azure/sql-database/sql-database-business-continuity)</span><span class="sxs-lookup"><span data-stu-id="9da19-127">These databases are stored in Azure SQL, which has an extensive [business continuity plan](https://docs.microsoft.com/azure/sql-database/sql-database-business-continuity).</span></span>

<span data-ttu-id="9da19-128">SharePoint использует модель репликации, предоставляемую Azure SQL, и создал проприетарную технологию автоматизации, чтобы определить, требуется отбой и при необходимости инициировать операцию.</span><span class="sxs-lookup"><span data-stu-id="9da19-128">SharePoint uses the replication model provided by Azure SQL and has built a proprietary automation technology to determine a failover is required and to initiate the operation if necessary.</span></span> <span data-ttu-id="9da19-129">Таким образом, она попадает в категорию "Отбой базы данных вручную" с точки SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="9da19-129">As such, it falls into the 'Manual database failover' category from an Azure SQL perspective.</span></span> <span data-ttu-id="9da19-130">Последние показатели восстановления баз данных Azure SQL доступны [здесь.](https://docs.microsoft.com/azure/azure-sql/database/business-continuity-high-availability-disaster-recover-hadr-overview#recover-a-database-to-the-existing-server)</span><span class="sxs-lookup"><span data-stu-id="9da19-130">The latest metrics for Azure SQL database recoverability are available [here](https://docs.microsoft.com/azure/azure-sql/database/business-continuity-high-availability-disaster-recover-hadr-overview#recover-a-database-to-the-existing-server).</span></span>

<span data-ttu-id="9da19-131">SharePoint использует систему SQL Azure для восстановления точки во времени (PITR) в течение 14 дней.</span><span class="sxs-lookup"><span data-stu-id="9da19-131">SharePoint uses Azure SQL's backup system to enable Point in Time Restores (PITR) for up to 14 days.</span></span> <span data-ttu-id="9da19-132">PitR более подробно освещается в более [позднем разделе.](#deletion-backup-and-point-in-time-restore)</span><span class="sxs-lookup"><span data-stu-id="9da19-132">PITR is covered more in a [later section.](#deletion-backup-and-point-in-time-restore)</span></span>

## <a name="automated-failover"></a><span data-ttu-id="9da19-133">Автоматическая отбойная отбойная система</span><span class="sxs-lookup"><span data-stu-id="9da19-133">Automated failover</span></span>

<span data-ttu-id="9da19-134">SharePoint использует настраиваемую автоматическую отбойную передачу, чтобы свести к минимуму влияние на клиентский опыт, когда происходит событие для конкретного расположения.</span><span class="sxs-lookup"><span data-stu-id="9da19-134">SharePoint uses a custom-built automated failover to minimize the impact on customer experience when a location-specific event occurs.</span></span> <span data-ttu-id="9da19-135">Автоматизация на основе мониторинга, обнаруживаемая сбой одного или нескольких компонентов за пределами определенных пороговых значений, приведет к автоматическому перенаправлению всех действий пользователей из проблемной среды и перенаправлению на "теплый" дополнительный компонент.</span><span class="sxs-lookup"><span data-stu-id="9da19-135">Monitoring-driven automation detecting a single or multi-component failure beyond certain thresholds will result in automated redirection of all users' activity out of the problematic environment and over to a warm secondary.</span></span> <span data-ttu-id="9da19-136">Отбой приводит к тому, что метаданные и вычислительные хранилища полностью обслуживаются из нового центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="9da19-136">A failover results in metadata and compute storage being served entirely out of the new datacenter.</span></span> <span data-ttu-id="9da19-137">Так как хранилище BLOB всегда выполняется полностью активно или активно, для от сбоя не требуется никаких изменений.</span><span class="sxs-lookup"><span data-stu-id="9da19-137">As blob storage always runs entirely active/active, no change is required for a failover.</span></span> <span data-ttu-id="9da19-138">Вычислительный уровень предпочтит ближайший контейнер BLOB-объектов, но в любое время будет использовать как локальное, так и удаленное хранилище BLOB-объектов для обеспечения доступности.</span><span class="sxs-lookup"><span data-stu-id="9da19-138">The compute tier will prefer the nearest blob container but will use both local and remote blob storage locations at any time to ensure availability.</span></span>

<span data-ttu-id="9da19-139">SharePoint использует службу Azure Front Door для обеспечения внутренней маршрутки в сеть Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="9da19-139">SharePoint uses the Azure Front Door service to provide routing internal to the Microsoft network.</span></span> <span data-ttu-id="9da19-140">Эта конфигурация позволяет перенаправлять отбой независимо от DNS и снижает влияние кэшации на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="9da19-140">This configuration allows failover redirection independent of DNS and reduces the effect of local-machine caching.</span></span> <span data-ttu-id="9da19-141">Большинство операций от сбойов прозрачны для конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="9da19-141">Most failover operations are transparent to end users.</span></span> <span data-ttu-id="9da19-142">В случае сбойного решения пользователям не придется вносить какие-либо изменения, чтобы обеспечить доступ к службе.</span><span class="sxs-lookup"><span data-stu-id="9da19-142">If there is a failover, customers will not need to make any changes in order to maintain access to the service.</span></span>

## <a name="versioning-and-files-restore"></a><span data-ttu-id="9da19-143">Восстановление версий и файлов</span><span class="sxs-lookup"><span data-stu-id="9da19-143">Versioning and Files Restore</span></span>

<span data-ttu-id="9da19-144">Для новых библиотек документов SharePoint по умолчанию содержит 500 версий для каждого файла и при желании может быть настроен на сохранение дополнительных версий.</span><span class="sxs-lookup"><span data-stu-id="9da19-144">For newly created document libraries, SharePoint defaults to 500 versions on every file and can be configured to retain more versions if desired.</span></span> <span data-ttu-id="9da19-145">Пользовательский интерфейс не позволяет установить значение, меньшее чем 100 версий, но можно настроить систему для хранения меньше версий с помощью общедоступных API.</span><span class="sxs-lookup"><span data-stu-id="9da19-145">The UI doesn't allow a value fewer than 100 versions to be set, but it is possible to set the system to store fewer versions using public APIs.</span></span> <span data-ttu-id="9da19-146">Для обеспечения надежности любое значение меньше 100 не рекомендуется и может привести к непреднамеренной потере данных.</span><span class="sxs-lookup"><span data-stu-id="9da19-146">For reliability, any value less than 100 isn't recommended and can result in user activity causing inadvertent data loss.</span></span>

<span data-ttu-id="9da19-147">Дополнительные сведения о версии см. [в подпунктах "Версия" в SharePoint.](https://docs.microsoft.com/microsoft-365/community/versioning-basics-best-practices)</span><span class="sxs-lookup"><span data-stu-id="9da19-147">For more information about versioning, see [Versioning in SharePoint](https://docs.microsoft.com/microsoft-365/community/versioning-basics-best-practices).</span></span>

<span data-ttu-id="9da19-148">Восстановление файлов — это возможность вернуть время в любую библиотеку документов в SharePoint в любую секунду за последние 30 дней.</span><span class="sxs-lookup"><span data-stu-id="9da19-148">Files Restore is the ability to go 'back in time' on any Document Library in SharePoint to any second of time in the last 30 days.</span></span> <span data-ttu-id="9da19-149">Этот процесс можно использовать для восстановления после программ-вымогателей, массового удаления, повреждения или любого другого события.</span><span class="sxs-lookup"><span data-stu-id="9da19-149">This process can be used to recover from ransomware, mass deletions, corruption, or any other event.</span></span> <span data-ttu-id="9da19-150">Эта функция использует версии файлов, поэтому уменьшение версий по умолчанию может снизить эффективность восстановления.</span><span class="sxs-lookup"><span data-stu-id="9da19-150">This feature uses file versions so reducing default versions can reduce the effectiveness of this restore.</span></span>

<span data-ttu-id="9da19-151">Функция восстановления файлов задокументирована как для [OneDrive,](https://support.office.com/article/restore-your-onedrive-fa231298-759d-41cf-bcd0-25ac53eb8a15) так и [для SharePoint.](https://support.office.com/article/Restore-a-document-library-317791c3-8bd0-4dfd-8254-3ca90883d39a)</span><span class="sxs-lookup"><span data-stu-id="9da19-151">The Files Restore feature is documented for both [OneDrive](https://support.office.com/article/restore-your-onedrive-fa231298-759d-41cf-bcd0-25ac53eb8a15) and [SharePoint](https://support.office.com/article/Restore-a-document-library-317791c3-8bd0-4dfd-8254-3ca90883d39a).</span></span>

## <a name="deletion-backup-and-point-in-time-restore"></a><span data-ttu-id="9da19-152">Удаление, резервное копирование и восстановление точки во времени</span><span class="sxs-lookup"><span data-stu-id="9da19-152">Deletion, backup, and Point in Time Restore</span></span>

<span data-ttu-id="9da19-153">Содержимое пользователя, удаленное из SharePoint, проходит через следующий поток удаления.</span><span class="sxs-lookup"><span data-stu-id="9da19-153">User content deleted from SharePoint goes through the following deletion flow.</span></span>

<span data-ttu-id="9da19-154">Удаленные элементы сохраняются в корзинах в течение определенного периода времени.</span><span class="sxs-lookup"><span data-stu-id="9da19-154">Deleted items are retained in recycle bins for a certain period of time.</span></span> <span data-ttu-id="9da19-155">Для SharePoint срок хранения составляет 93 дня.</span><span class="sxs-lookup"><span data-stu-id="9da19-155">For SharePoint, the retention time is 93 days.</span></span> <span data-ttu-id="9da19-156">Он начинается с удаления элемента из его исходного расположения.</span><span class="sxs-lookup"><span data-stu-id="9da19-156">It begins when you delete the item from its original location.</span></span> <span data-ttu-id="9da19-157">При удалении элемента из корзины сайта он [](https://support.office.com/article/restore-deleted-items-from-the-site-collection-recycle-bin-5fa924ee-16d7-487b-9a0a-021b9062d14b)попадает в корзину.</span><span class="sxs-lookup"><span data-stu-id="9da19-157">When you delete the item from the site recycle bin, it goes into the [site collection recycle bin](https://support.office.com/article/restore-deleted-items-from-the-site-collection-recycle-bin-5fa924ee-16d7-487b-9a0a-021b9062d14b).</span></span> <span data-ttu-id="9da19-158">Он остается там в течение оставшихся 93 дней, а затем окончательно удаляется.</span><span class="sxs-lookup"><span data-stu-id="9da19-158">It stays there for the remainder of the 93 days, and then is permanently deleted.</span></span> <span data-ttu-id="9da19-159">Дополнительные сведения об использовании корзины можно найти по указанным здесь ссылкам.</span><span class="sxs-lookup"><span data-stu-id="9da19-159">More information about how to use the recycle bin is available at these links:</span></span>

- [<span data-ttu-id="9da19-160">Восстановление элементов в корзине</span><span class="sxs-lookup"><span data-stu-id="9da19-160">Restore items in the Recycle Bin</span></span>](https://support.office.com/article/Restore-items-in-the-Recycle-Bin-of-a-SharePoint-site-6df466b6-55f2-4898-8d6e-c0dff851a0be)
- <span data-ttu-id="9da19-161">[Восстановление удаленных элементов из корзины для коллекции веб-сайтов.](https://support.office.com/article/Restore-deleted-items-from-the-site-collection-recycle-bin-5fa924ee-16d7-487b-9a0a-021b9062d14b)</span><span class="sxs-lookup"><span data-stu-id="9da19-161">[Restore deleted items from the Site Collection Recycle Bin](https://support.office.com/article/Restore-deleted-items-from-the-site-collection-recycle-bin-5fa924ee-16d7-487b-9a0a-021b9062d14b).</span></span>

<span data-ttu-id="9da19-162">Этот процесс является потоком удаления по умолчанию и не учитывает политики и метки хранения.</span><span class="sxs-lookup"><span data-stu-id="9da19-162">This process is the default deletion flow and does not take into account retention policies or labels.</span></span> <span data-ttu-id="9da19-163">Дополнительные сведения [см. в сведениях о хранении для SharePoint и OneDrive.](https://docs.microsoft.com/microsoft-365/compliance/retention-policies-sharepoint)</span><span class="sxs-lookup"><span data-stu-id="9da19-163">For more information, see [Learn about retention for SharePoint and OneDrive](https://docs.microsoft.com/microsoft-365/compliance/retention-policies-sharepoint).</span></span>

<span data-ttu-id="9da19-164">После завершения конвейера рециркуляции в течение 93 дней удаление происходит независимо для метаданных и хранилища BLOB-данных.</span><span class="sxs-lookup"><span data-stu-id="9da19-164">After the 93-day recycle pipeline is complete, deletion takes place independently for Metadata and for Blob Storage.</span></span> <span data-ttu-id="9da19-165">Метаданные будут немедленно удалены из базы данных, что сделает содержимое нечитаемым, если метаданные не будут восстановлены из резервной копии.</span><span class="sxs-lookup"><span data-stu-id="9da19-165">Metadata will be removed immediately from the database, which makes the content unreadable unless the metadata is restored from backup.</span></span> <span data-ttu-id="9da19-166">SharePoint поддерживает резервное копирование метаданных в течение 14 дней.</span><span class="sxs-lookup"><span data-stu-id="9da19-166">SharePoint maintains 14 days-worth of backups of metadata.</span></span> <span data-ttu-id="9da19-167">Эти резервные копии принимаются локально почти в режиме реального времени, а затем в хранилище избыточных контейнеров хранилища [Azure,](https://docs.microsoft.com/azure/sql-database/sql-database-automated-backups) согласно документации на момент публикации, имеют 5-10-минутное расписание.</span><span class="sxs-lookup"><span data-stu-id="9da19-167">These backups are taken locally in near real time and then pushed to storage in redundant Azure Storage containers on, [according to documentation](https://docs.microsoft.com/azure/sql-database/sql-database-automated-backups) at the time of this publication, a 5-10-minute schedule.</span></span>

<span data-ttu-id="9da19-168">При удалении содержимого хранилища BLOB-элементов SharePoint использует функцию мягкого удаления для хранилища BLOB-элементов Azure, чтобы защититься от случайного или злонамеренного удаления.</span><span class="sxs-lookup"><span data-stu-id="9da19-168">When deleting Blob Storage content, SharePoint utilizes the soft delete feature for Azure Blob Storage to protect against accidental or malicious deletion.</span></span> <span data-ttu-id="9da19-169">С помощью этой функции у нас есть в общей сложности 14 дней, в течение которых мы восстанавливаем содержимое до его без возможности восстановления.</span><span class="sxs-lookup"><span data-stu-id="9da19-169">Using this feature, we have a total of 14 days in which to restore content before it is permanently deleted.</span></span>

>[!Note]
><span data-ttu-id="9da19-170">Хотя приложения Майкрософт будут отправлять содержимое в корзину для стандартного процесса, SharePoint предоставляет API, позволяющие пропускать корзину и принудительно удалять ее немедленно.</span><span class="sxs-lookup"><span data-stu-id="9da19-170">While Microsoft applications will send content to the recycle bin for the standard process, SharePoint does provide APIs that allow for skipping the recycle bin and forcing an immediate delete.</span></span> <span data-ttu-id="9da19-171">Просмотрите свои приложения, чтобы убедиться, что это делается только в случае необходимости в целях соответствия требованиям.</span><span class="sxs-lookup"><span data-stu-id="9da19-171">Review your applications to ensure this is only done when necessary for compliance reasons.</span></span>

## <a name="integrity-checks"></a><span data-ttu-id="9da19-172">Проверки целостности</span><span class="sxs-lookup"><span data-stu-id="9da19-172">Integrity Checks</span></span>

<span data-ttu-id="9da19-173">SharePoint использует различные методы для обеспечения целостности больших и метаданных на всех этапах жизненного цикла данных:</span><span class="sxs-lookup"><span data-stu-id="9da19-173">SharePoint uses various methods to ensure the integrity of blobs and metadata at all stages of the data lifecycle:</span></span>

- <span data-ttu-id="9da19-174">**Hash file stored in metadata**: Hash of the entire file is stored with file metadata to ensure document level data integrity is maintained during all operations</span><span class="sxs-lookup"><span data-stu-id="9da19-174">**File hash stored in metadata**: Hash of the entire file is stored with file metadata to ensure document level data integrity is maintained during all operations</span></span>
- <span data-ttu-id="9da19-175">**Hash BLOB,** хранимый в метаданных: каждый элемент BLOB-объект хранит hash зашифрованного содержимого для защиты от повреждения в основном хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="9da19-175">**Blob hash stored in metadata**: Each blob-item stores a hash of the encrypted content to protect against corruption in underlying Azure storage.</span></span>
- <span data-ttu-id="9da19-176">**Задание целостности** данных: каждые 14 дней каждый сайт проверяется на целостность, перечисляя элементы в базе данных и соединая с перечисленными BLOB-объектами в хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="9da19-176">**Data integrity job**: Every 14 days, each site is scanned for integrity by listing items in the database and matching those up with listed blobs in Azure storage.</span></span> <span data-ttu-id="9da19-177">Задание сообщает о любых ссылках на BLOB-файлы и при необходимости может получить эти [BLOB-файлы](https://docs.microsoft.com/azure/storage/blobs/soft-delete-blob-overview) с помощью функции мягкого удаления хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="9da19-177">The job reports any blob-references missing storage-blobs and can retrieve those blobs through the [Azure storage soft-delete](https://docs.microsoft.com/azure/storage/blobs/soft-delete-blob-overview) feature if needed.</span></span>
